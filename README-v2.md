# 🏠 Family Finance Manager - 家庭财务管理专家

## 📋 项目概述 (v2.0 优化版)

**项目名称**: Family Finance Manager  
**项目类型**: 全栈 Web 应用  
**核心功能**: 智能识别上传的小票/收据/账单，自动提取关键信息并归类到家庭财务分类  
**目标用户**: 家庭用户、个人理财者

---

## 🎯 功能需求

### 核心功能

1. **智能识别**
   - 支持上传图片（小票、收据、账单）
   - 支持文字描述输入
   - 自动提取：日期、商家、金额、类别、支付方式

2. **收支判断**
   - 自动判断【收入】或【支出】
   - 识别工资、转账、退款等收入
   - 识别消费、支出等

3. **智能分类**
   - 餐饮 🍔
   - 超市 🛒
   - 交通 🚗
   - 房租 🏠
   - 水电 ⚡
   - 孩子 👶
   - 医疗 💊
   - 娱乐 🎬
   - 其他 📦
   - 收入 💰

4. **智能提醒**
   - 异常消费提醒
   - 预算超支警告
   - 优化建议

5. **数据展示**
   - 清晰表格输出
   - 月度/年度统计
   - 分类占比图表

6. **数据存储**
   - Supabase 数据库
   - 本地数据持久化

---

## 🏗️ 技术架构

### 前端
- **框架**: 纯 HTML + CSS + JavaScript (无框架依赖)
- **UI**: 现代深色主题，响应式设计
- **图标**: Emoji + Unicode 符号
- **PWA**: 支持添加到主屏幕

### 后端
- **AI**: MiniMax API (用于 OCR 文字提取)
- **数据库**: Supabase (PostgreSQL)
- **图片处理**: 浏览器端压缩 + Base64

### 部署
- **平台**: GitHub Pages
- **域名**: ocean-go.github.io/family-finance/

---

## 📊 数据库设计

### Table: transactions

| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 主键 |
| type | TEXT | 'income' / 'expense' |
| amount | DECIMAL | 金额 |
| currency | TEXT | 币种 (CNY/USD) |
| category | TEXT | 分类 |
| merchant | TEXT | 商家 |
| date | DATE | 日期 |
| payment_method | TEXT | 支付方式 |
| description | TEXT | 描述 |
| image_url | TEXT | 图片链接 |
| notes | TEXT | 备注 |
| created_at | TIMESTAMP | 创建时间 |

### Table: categories

| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 主键 |
| name | TEXT | 分类名称 |
| emoji | TEXT | 分类图标 |
| budget | DECIMAL | 预算金额 |
| color | TEXT | 颜色 |

---

## 🔄 v2.0 自优化内容

### 优化 1: 用户体验提升

**问题**: 原始版本上传后无明确反馈

**优化方案**:
- 添加步骤进度指示器
- 增加加载动画 (spinner)
- 添加成功/失败 Toast 提示
- 显示 AI 识别进度

### 优化 2: 数据准确性

**问题**: AI 识别可能不准确

**优化方案**:
- 识别结果可编辑
- 添加"确认添加"步骤
- 支持手动修改分类
- 保存历史识别记录用于改进

### 优化 3: 离线支持

**问题**: 无网络时无法使用

**优化方案**:
- Service Worker 缓存
- IndexedDB 本地存储
- 网络恢复后同步

### 优化 4: 移动端体验

**问题**: 移动端操作不便

**优化方案**:
- 大按钮设计
- 触摸滑动操作
- 底部导航栏
- 拍照直接上传

---

## 🎨 UI/UX 设计

### 页面结构

1. **首页/Dashboard**
   - 本月收支概览
   - 快速统计卡片
   - 最近交易列表
   - 快捷操作按钮

2. **上传页面**
   - 拖拽上传区域
   - 文字输入框
   - AI 识别结果预览
   - 确认/编辑表单

3. **交易记录**
   - 可排序表格
   - 筛选/搜索
   - 编辑/删除
   - 分页显示

4. **统计分析**
   - 分类饼图
   - 月度趋势
   - 预算对比

5. **设置**
   - API Key 配置
   - 分类管理
   - 数据导出/导入

### 配色方案
- 主色: #667eea (紫蓝渐变)
- 背景: #1a1a2e → #16213e
- 收入: #4ade80 (绿色)
- 支出: #f87171 (红色)
- 文字: #ffffff / #a0a0a0

---

## 🚀 开发计划

### Phase 1: 基础版 (MVP) ✅
- [x] 项目结构搭建
- [x] 数据库连接
- [x] 基本 UI 框架
- [x] 图片上传
- [x] 文字输入
- [x] AI 识别
- [x] 数据显示表格

### Phase 2: 增强版 (当前) 
- [x] 改进 UI 布局
- [x] 添加加载动画
- [x] 优化识别准确率
- [x] 添加错误处理
- [ ] 批量上传
- [ ] 数据导出
- [ ] 月度统计

### Phase 3: 高级版
- [ ] 图表可视化
- [ ] 预算管理
- [ ] 智能提醒
- [ ] 多用户支持
- [ ] 离线支持

---

## 📝 版本历史

### v1.0 - 初始版
- 基本图片上传
- 文字输入
- 基础 AI 识别
- 简单表格显示

### v1.1 - 优化版 (v2.0)
- 改进 UI 布局
- 添加加载动画
- 优化识别准确率
- 添加错误处理
- 响应式设计
- 分类统计
- 数据持久化
- 交互反馈改进

### v1.2 - 增强版 (规划中)
- 批量上传
- 数据导出
- 图表可视化
- 预算管理

---

## 🔗 相关链接

- **Supabase**: https://nlzqtcdavheklvrlzloq.supabase.co
- **GitHub**: https://github.com/ocean-Go/family-finance/
- **在线演示**: https://ocean-go.github.io/family-finance/

---

## 📄 License

MIT License
