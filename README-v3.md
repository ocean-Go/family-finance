# 🏠 Family Finance Manager - 家庭财务管理专家

## 📋 项目概述 (v3.0 完善版)

**项目名称**: Family Finance Manager  
**项目类型**: 全栈 Web 应用 (PWA) 
**核心功能**: 智能识别上传的小票/收据/账单，自动提取关键信息并归类到家庭财务分类  
**目标用户**: 家庭用户、个人理财者

---

## 🎯 功能需求

### 核心功能 (完整版)

1. **多模态输入**
   - 📷 图片上传 (小票、收据、账单)
   - ✏️ 文字描述输入
   - 📋 剪贴板粘贴
   - 🔗 URL 图片识别

2. **AI 智能识别**
   - 日期自动提取
   - 商家名称识别
   - 金额提取
   - 支付方式识别
   - 收支类型判断
   - 分类建议

3. **智能分类** (完整分类)
   - 🍔 餐饮 (早餐/午餐/晚餐/零食/外卖)
   - 🛒 超市 (日用品/生鲜/零食)
   - 🚗 交通 (打车/公交/地铁/加油/停车)
   - 🏠 房租 (租金/物业/维修)
   - ⚡ 水电 (电费/水费/燃气/网络)
   - 👶 孩子 (学费/培训/玩具/医疗)
   - 💊 医疗 (药店/医院/体检)
   - 🎬 娱乐 (电影/游戏/旅游/健身)
   - 📦 购物 (服装/电子产品/礼物)
   - 💰 收入 (工资/奖金/投资/退款)

4. **智能分析**
   - 📊 月度收支统计
   - 📈 分类占比分析
   - ⚠️ 异常检测
   - 💡 优化建议
   - 📅 对比历史

5. **提醒系统**
   - ⚡ 预算超支警告
   - 💰 大额消费提醒
   - 📊 月度报告
   - 🔄 定期汇总

6. **数据管理**
   - 📥 数据导入 (CSV/JSON)
   - 📤 数据导出 (CSV/Excel)
   - 🔄 数据同步
   - 🗑️ 回收站

---

## 🏗️ 技术架构

### 前端
- **框架**: 原生 HTML5 + CSS3 + ES6+
- **UI**: 现代深色主题 + 玻璃拟态
- **PWA**: Service Worker + Manifest
- **离线**: IndexedDB 本地缓存

### 后端服务
- **AI**: MiniMax API (文字提取)
- **数据库**: Supabase (PostgreSQL)
- **存储**: Supabase Storage (图片)

### 部署
- **平台**: GitHub Pages
- **CDN**: Cloudflare
- **域名**: ocean-go.github.io/family-finance/

---

## 📊 数据库设计

### Table: transactions

| 字段 | 类型 | 说明 | 示例 |
|------|------|------|------|
| id | UUID | 主键 | - |
| type | TEXT | 收入/支出 | 'income' / 'expense' |
| amount | DECIMAL | 金额 | 128.50 |
| currency | TEXT | 币种 | 'CNY' / 'USD' |
| category | TEXT | 分类 | '餐饮' |
| subcategory | TEXT | 子分类 | '午餐' |
| merchant | TEXT | 商家 | '海底捞' |
| date | DATE | 交易日期 | 2026-02-13 |
| payment_method | TEXT | 支付方式 | '微信' / '支付宝' / '现金' |
| description | TEXT | 描述 | '公司聚餐' |
| image_url | TEXT | 图片链接 | supabase://...' |
| notes | TEXT | 备注 | - |
| is_recurring | BOOLEAN | 周期性 | false |
| tags | JSONB | 标签 | ['聚餐', '团队'] |
| created_at | TIMESTAMP | 创建时间 | - |
| updated_at | TIMESTAMP | 更新时间 | - |

### Table: categories

| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 主键 |
| name | TEXT | 分类名称 |
| emoji | TEXT | 分类图标 |
| budget_monthly | DECIMAL | 月度预算 |
| color | TEXT | 颜色代码 |
| sort_order | INTEGER | 排序 |
| is_income | BOOLEAN | 是否收入分类 |

### Table: budgets

| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 主键 |
| category_id | UUID | 分类ID |
| amount | DECIMAL | 预算金额 |
| period | TEXT | 周期 (monthly/weekly) |
| year | INTEGER | 年份 |
| month | INTEGER | 月份 |

---

## 🔄 v3.0 自优化内容 (第三轮)

### 优化 5: AI 识别增强

**新增功能**:
- 多语言支持 (中/英)
- 模糊金额识别
- 日期格式自动标准化
- 商家名称智能纠错
- 置信度显示

### 优化 6: 数据安全

**新增功能**:
- 数据加密存储
- 操作日志记录
- 数据备份/恢复
- 导入校验

### 优化 7: 性能优化

**新增功能**:
- 图片压缩上传 (< 500KB)
- 懒加载列表
- 分页加载
- 缓存策略

### 优化 8: 辅助功能

**新增功能**:
- 快捷键支持
- 键盘导航
- 屏幕阅读器兼容
- 深色/浅色主题切换

---

## 🎨 完整 UI 流程

```
┌─────────────────────────────────────────┐
│              📱 Mobile UI               │
├─────────────────────────────────────────┤
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ │
│  │  📊 统计 │ │  ➕ 添加 │ │  📋 记录│ │
│  └─────────┘ └─────────┘ └─────────┘ │
└─────────────────────────────────────────┘

┌─────────────────────────────────────────┐
│           ➕ 添加交易流程                │
├─────────────────────────────────────────┤
│  1. 选择输入方式                        │
│     [📷 拍照] [📁 上传] [✏️ 文字]      │
│                                         │
│  2. AI 识别处理                        │
│     [██████████░░] 75%                  │
│                                         │
│  3. 预览 & 确认                        │
│     日期: 2026-02-13                    │
│     商家: XX超市                        │
│     金额: ¥128.50                       │
│     分类: [🛒 超市 ▼]                  │
│                                         │
│  4. 提交成功                            │
│     ✅ 已添加到记录                      │
└─────────────────────────────────────────┘
```

---

## 📈 统计图表

### 月度收支
```
┌────────────────────────────────────┐
│     📊 2026年2月 收支分析          │
├────────────────────────────────────┤
│  💰 收入: ¥15,000                 │
│  💸 支出: ¥8,520                   │
│  📈 结余: ¥6,480                   │
│                                    │
│  ████████████░░░░░░░░ 56.8%       │
└────────────────────────────────────┘
```

### 分类占比
```
┌────────────────────────────────────┐
│     🍔 支出分类                     │
├────────────────────────────────────┤
│  🛒 超市   ████████████ 35%        │
│  🍔 餐饮   ████████ 25%            │
│  🚗 交通   █████ 15%               │
│  🎬 娱乐   ████ 12%                │
│  ⚡ 水电   ███ 10%                  │
│  📦 其他   ██ 3%                     │
└────────────────────────────────────┘
```

---

## 🚀 开发计划

### Phase 1: MVP ✅
- [x] 项目结构
- [x] 数据库
- [x] 基本 UI
- [x] 图片/文字上传
- [x] AI 识别
- [x] 数据显示

### Phase 2: 增强版 ✅
- [x] UI 优化
- [x] 加载动画
- [x] 错误处理
- [x] 响应式
- [x] 分类统计

### Phase 3: 完善版 (当前)
- [x] 完整分类
- [x] 预算管理
- [x] 数据导出
- [ ] 图表可视化
- [ ] 离线支持
- [ ] PWA

---

## 📝 版本历史

| 版本 | 日期 | 内容 |
|------|------|------|
| v1.0 | 2026-02-13 | 初始版本 |
| v2.0 | 2026-02-13 | 用户体验优化版 |
| v3.0 | 2026-02-13 | 完善增强版 |

---

## 🔗 相关链接

- **Supabase**: https://nlzqtcdavheklvrlzloq.supabase.co
- **GitHub**: https://github.com/ocean-Go/family-finance/
- **在线演示**: https://ocean-go.github.io/family-finance/

---

## 📄 License

MIT License
